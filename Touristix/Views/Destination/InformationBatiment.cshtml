@model Touristix.Models.BatimentModel

@{
    ViewBag.Title = "Information";
}

<script type="text/javascript" src="/Scripts/Touristix/Erreur Image.js"></script>
<img src="/Images/Batiments/@Model.Image" onerror="ErreurImage(this)" alt="@Model.Image"/>

<fieldset>
    <legend>@Html.DisplayFor(model => model.Nom)</legend>

    <dl>
        <dt>@Html.DisplayNameFor(model => model.URL)</dt>
        <dd><a href="@Html.DisplayFor(model => model.URL)">@Html.DisplayFor(model => model.URL)</a></dd>
        <dt>@Html.DisplayNameFor(model => model.Ville)</dt>
        <dd>@Html.DisplayFor(model => model.Ville)</dd>
        <dt>@Html.DisplayNameFor(model => model.Adresse)</dt>
        <dd><a href="#" onclick="AfficheLaCarte();" >@Html.DisplayFor(model => model.Adresse)</a></dd>        
        <dt>Aperçu</dt>
        <dd>@Html.DisplayFor(model => model.Apercu)</dd>
        <dt>@Html.DisplayNameFor(model => model.Details)</dt>
        <dd>@Html.DisplayFor(model => model.Details)</dd>
    </dl>
</fieldset>


<script type = "text/javascript" src="https://maps.googleapis.com/maps/api/js?v=3.exp"></script> 
   
<script type = "text/javascript">
    function AfficheLaCarte() {   
        var map;
        var Lieu = "@Model.Adresse" + ", " + "@Model.Ville";
        var mapOptions = {
            zoom: 8,
            center: new google.maps.LatLng(-34.397, 150.644)
        };
        map = new google.maps.Map(document.getElementById('map-canvas'), mapOptions);

        new google.maps.Geocoder().geocode({ 'address': Lieu }, function (results, status) {
            if (status == google.maps.GeocoderStatus.OK) {
                var marker = new google.maps.Marker({
                    map: map,
                    draggable: true
                });
                marker.setPosition(results[0].geometry.location);
                map.setCenter(results[0].geometry.location);
                map.setZoom(15);
            }
            else {
                alert("Une erreur s'est produite en affichant la carte: " + status);
            }
        });
        google.maps.event.addDomListener(window, 'load', initialize);
    }
</script>
        
@section Map {
  <div id="map-canvas" style="width: 100%; height: 480px; margin: 0px; padding: 0px;"/>
}

<p>
    @Html.ActionLink("Retour à l'index", "Index")
</p>
